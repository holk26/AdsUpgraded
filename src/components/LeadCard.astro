---
import Card from './ui/Card.astro';
import Badge from './ui/Badge.astro';

export interface Props {
  name: string;
  email: string;
  source: 'Facebook' | 'Web' | 'Instagram';
  utm_campaign: string;
  status: 'New' | 'Contacted' | 'Sold';
}

const { name, email, source, utm_campaign, status } = Astro.props;

// Map status to badge variant
const statusVariants = {
  New: 'accent' as const,
  Contacted: 'warning' as const,
  Sold: 'success' as const,
};

// SVG icons for sources
const sourceIcons = {
  Facebook: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>',
  Web: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>',
  Instagram: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>',
};
---

<Card class="hover:border-brand-accent/30 transition-colors">
  <div class="flex items-start justify-between gap-4">
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-text-muted flex-shrink-0" set:html={sourceIcons[source]} />
        <h3 class="font-heading font-bold text-text-heading text-lg truncate">
          {name}
        </h3>
      </div>
      <p class="text-sm text-text-body mb-3 truncate">{email}</p>
      <div class="flex items-center gap-2 flex-wrap">
        <Badge variant="accent">
          {utm_campaign}
        </Badge>
        <Badge variant={statusVariants[status]}>
          {status}
        </Badge>
      </div>
    </div>
  </div>
</Card>
