---
export interface Props {
  lang?: string;
  t: (key: string) => string;
}

const { lang = 'en', t } = Astro.props;
---

<header id="header" class="fixed top-0 left-0 right-0 z-header glass-effect border-b border-white/5 shadow-lg transition-all duration-300 header-with-glow">
  <!-- Animated network background -->
  <div class="header-network-bg"></div>
  
  <div class="container mx-auto px-4 relative z-10">
    <nav class="flex items-center justify-between py-3 md:py-4 gap-2 md:gap-4" aria-label="Main navigation">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 group focus-visible:outline-2 focus-visible:outline-brand-accent rounded-lg flex-shrink-0">
        <svg class="w-7 h-7 md:w-8 md:h-8 transition-transform group-hover:scale-110" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <filter id="glowIndigo" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <filter id="glowCyan" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <radialGradient id="indigoGrad" cx="50%" cy="50%">
              <stop offset="0%" style="stop-color:#7B7BFF;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#5D5DFF;stop-opacity:0.8" />
            </radialGradient>
            <radialGradient id="cyanGrad" cx="50%" cy="50%">
              <stop offset="0%" style="stop-color:#00FFDB;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#00FFC2;stop-opacity:0.7" />
            </radialGradient>
          </defs>
          
          <!-- Hexagons with fill and glow -->
          <polygon points="60,15 80,28 80,54 60,67 40,54 40,28" fill="url(#indigoGrad)" filter="url(#glowIndigo)" opacity="0.9"/>
          <polygon points="60,53 80,66 80,92 60,105 40,92 40,66" fill="url(#cyanGrad)" filter="url(#glowCyan)" opacity="0.8"/>
          
          <!-- Hexagons outlines with enhanced glow -->
          <polygon points="60,15 80,28 80,54 60,67 40,54 40,28" fill="none" stroke="#7B7BFF" stroke-width="2" opacity="0.7"/>
          <polygon points="60,53 80,66 80,92 60,105 40,92 40,66" fill="none" stroke="#00FFC2" stroke-width="2" opacity="0.7"/>
          
          <!-- Connection lines -->
          <line x1="60" y1="67" x2="60" y2="53" stroke="#FFFFFF" stroke-width="2" opacity="0.6"/>
          
          <!-- Outer ring -->
          <circle cx="60" cy="60" r="18" fill="none" stroke="#FFFFFF" stroke-width="2" opacity="0.5"/>
          
          <!-- Inner ring -->
          <circle cx="60" cy="60" r="22" fill="none" stroke="#5D5DFF" stroke-width="1.5" opacity="0.3"/>
          
          <!-- Connection nodes -->
          <circle cx="60" cy="8" r="2.5" fill="#5D5DFF" filter="url(#glowIndigo)"/>
          <circle cx="86" cy="28" r="2.5" fill="#00FFC2" filter="url(#glowCyan)"/>
          <circle cx="86" cy="92" r="2.5" fill="#00FFC2" filter="url(#glowCyan)"/>
          <circle cx="60" cy="112" r="2.5" fill="#5D5DFF" filter="url(#glowIndigo)"/>
          <circle cx="34" cy="92" r="2.5" fill="#5D5DFF" filter="url(#glowIndigo)"/>
          <circle cx="34" cy="28" r="2.5" fill="#00FFC2" filter="url(#glowCyan)"/>
        </svg>
        <span class="text-base md:text-xl font-bold text-color-accent tracking-wider">NYXOK</span>
      </a>

      <!-- Language Selector -->
      <div class="flex gap-1 md:gap-2" role="group" aria-label="Language selection">
        <a 
          href="/" 
          class={`px-2 md:px-3 py-1 md:py-1.5 rounded-md text-sm font-medium transition-all ${lang === 'en' ? 'bg-color-accent text-white shadow-sm' : 'text-text-muted hover:text-text-heading hover:bg-color-surface'}`}
          aria-label="Switch to English"
          aria-current={lang === 'en' ? 'true' : undefined}
        >
          EN
        </a>
        <a 
          href="/es" 
          class={`px-2 md:px-3 py-1 md:py-1.5 rounded-md text-sm font-medium transition-all ${lang === 'es' ? 'bg-color-accent text-white shadow-sm' : 'text-text-muted hover:text-text-heading hover:bg-color-surface'}`}
          aria-label="Cambiar a EspaÃ±ol"
          aria-current={lang === 'es' ? 'true' : undefined}
        >
          ES
        </a>
      </div>
    </nav>
  </div>
</header>

<!-- Skip to main content link for accessibility -->
<a 
  href="#main-content" 
  class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-brand-primary text-white px-4 py-2 rounded-lg z-skip focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-accent"
>
  Skip to main content
</a>

<style>
  /* Header with glow effect inspired by the reference image */
  .header-with-glow {
    position: relative;
    overflow: hidden;
  }

  .header-network-bg {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(circle at 20% 50%, rgba(93, 93, 255, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 50%, rgba(0, 255, 194, 0.06) 0%, transparent 50%);
    pointer-events: none;
    opacity: 0.7;
  }

  .glass-effect {
    background: rgba(10, 14, 39, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
</style>
